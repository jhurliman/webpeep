{"version":3,"sources":["webpack:///webpack/bootstrap 1a11b254bdaf7256f5ca","webpack:///./src/index.js","webpack:///./src/audio-library.js","webpack:///./src/event-sound.js","webpack:///./src/audio-resource.js","webpack:///./src/utils.js","webpack:///./src/mersenne-twister.js","webpack:///./src/isound.js","webpack:///./src/heartbeat-sound.js","webpack:///./src/state-sound.js","webpack:///./src/library-parser.js","webpack:///./src/hacker-news-auralizer.js","webpack:///./src/iauralizer.js","webpack:///./src/lru-cache.js","webpack:///./src/signal-type.js","webpack:///./src/random-signal-mapper.js","webpack:///./src/isignal-mapper.js"],"names":["LIBRARY_URLS","audioCtx","library","auralizer","signalMapper","document","addEventListener","window","AudioContext","webkitAudioContext","masterVolume","createGain","connect","destination","fileExtension","load","then","startLoadAudio","setTimeout","start","setupUI","muteButton","getElementById","unmuteButton","style","display","gain","value","e","detail","type","STATE","body","backgroundPositionX","intensity","AudioLibrary","indexUrls","options","coupledSounds","eventSounds","heartbeatSounds","stateSounds","Promise","all","map","request","url","parseIndexFile","data","console","log","length","baseUrl","replace","parsed","parse","forEach","libraryEntry","dataEntry","content","property","name","push","warn","EventSound","count","Math","max","parseInt","segments","ext","Array","apply","_","i","zeroPad","segment","hash","prng","origin","x","random","y","z","playableSegments","playOneShot","filter","s","audio","spatialNode","createPanner","refDistance","maxDistance","rolloffFactor","coneInnerAngle","setOrientation","setPosition","gainNode","time","currentTime","source","createBufferSource","buffer","duration","stop","AudioResource","loading","bufferToAudio","audioBuffer","toFixed","raw","pcm16","Int16Array","pcmFloat","Float32Array","set","createBuffer","copyToChannel","resolve","decodeAudioData","Utils","path","match","min","floor","responseType","reject","xhr","XMLHttpRequest","open","onload","status","response","statusText","onerror","send","array","slice","j","str","len","FADE_IN","cos","PI","FADE_OUT","Object","values","obj","vals","key","CustomEvent","event","params","bubbles","cancelable","evt","createEvent","initCustomEvent","prototype","Event","MersenneTwister","seed","Date","getTime","N","M","MATRIX_A","UPPER_MASK","LOWER_MASK","mt","mti","mag01","kk","randomInt","ISound","split","shift","description","suggested","HeartbeatSound","StateSound","timer","stateGain","index","sources","doPlay","curTime","endTime","curSource","curSegment","nextSegment","playWithCrossfade","sharedGain","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","VOLUME_CHANGE_TIME","offset","FADE_TIME","nextSource","clearTimeout","shuffled","fadeOutTime","setValueCurveAtTime","LibraryParser","peg$SyntaxError","message","expected","found","location","Error","captureStackTrace","child","parent","ctor","constructor","buildMessage","hex","ch","charCodeAt","toString","toUpperCase","literalEscape","classEscape","describeExpectation","expectation","DESCRIBE_EXPECTATION_FNS","literal","text","escapedParts","parts","inverted","any","end","other","descriptions","sort","join","SyntaxError","input","peg$literalExpectation","ignoreCase","peg$classExpectation","peg$endExpectation","peg$computePosDetails","pos","p","details","peg$posDetailsCache","line","column","peg$computeLocation","startPos","endPos","startPosDetails","endPosDetails","peg$fail","peg$currPos","peg$maxFailPos","peg$maxFailExpected","peg$buildStructuredError","peg$parseElements","s0","s1","s2","peg$parseComment","peg$FAILED","peg$parseElement","peg$parseText","peg$savedPos","peg$c0","s3","peg$parseStartTag","peg$parseSubContent","peg$parseEndTag","peg$c1","peg$parseSubElement","peg$c2","substr","peg$c3","peg$c4","peg$c5","peg$c6","peg$c8","peg$parseTagName","peg$c9","peg$c10","peg$c11","peg$c12","peg$c13","peg$c14","test","charAt","peg$c15","peg$c16","peg$c17","peg$c18","peg$c19","peg$result","peg$startRuleFunctions","Elements","peg$startRuleFunction","elements","startTag","endTag","chars","trim","peg$silentFails","startRule","HackerNewsAuralizer","hn","firebase","initializeApp","databaseURL","database","ref","itemCache","capacity","topStories","bestStories","on","now","itemIDs","snapshot","val","signal","EVENT","getItems","baseVal","storiesPerHour","items","curVal","updateTrend","lastUpdate","deltaMS","sorted","jobs","stories","comments","polls","item","signals","denominator","signalOverTime","bestSet","Set","id","has","getItem","itemID","cached","fetch","once","store","err","callback","spacing","randMS","EVENTS","HEARTBEATS","STATES","windowSize","oldest","IAuralizer","LRUCache","_map","_queue","_capacity","_size","replaced","delete","queue","node","moveToLast","first","detachFromQueue","next","last","prev","SignalType","HEARTBEAT","RandomSignalMapper","rand1","rand2","rand3","stateSignals","maps","state","eventSignals","heartbeatSignals","heartbeat","ISignalMapper","signalHandler","bind","sounds","sound","dispatchEvent","play"],"mappings":"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","file":"webpeep.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 1a11b254bdaf7256f5ca\n **/","import AudioLibrary from './audio-library'\nimport HackerNewsAuralizer from './hacker-news-auralizer'\nimport RandomSignalMapper from './random-signal-mapper'\nimport SignalType from './signal-type'\n\nconst LIBRARY_URLS = [\n  '/sounds/wetlands/coupled/__INDEX__',\n  '/sounds/wetlands/events/__INDEX__',\n  '/sounds/wetlands/heartbeats/__INDEX__',\n  '/sounds/wetlands/states/__INDEX__',\n]\n\nlet audioCtx\nlet library\nlet auralizer\nlet signalMapper\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Initialize a web audio context\n  audioCtx = new (window.AudioContext || window.webkitAudioContext)()\n\n  // Create a master volume knob\n  audioCtx.masterVolume = audioCtx.createGain()\n  audioCtx.masterVolume.connect(audioCtx.destination)\n\n  // Create a library that will act as a database of available sounds. If\n  // fileExtension is not specified, raw audio will be loaded (PCM S16LE)\n  library = new AudioLibrary(LIBRARY_URLS, { fileExtension: null })\n\n  // Load the library index files\n  library.load(audioCtx).then(() => {\n    // Load an auralizer\n    auralizer = new HackerNewsAuralizer()\n    // auralizer = new RandomAuralizer()\n\n    // Create a signal mapper to map auralizer signals to audio resources\n    signalMapper = new RandomSignalMapper(auralizer, library)\n\n    // Start loading audio resources. This is done by the signal mapper since it\n    // knows which library files are actually used\n    signalMapper.startLoadAudio()\n\n    // Turn the auralizer on to enable triggering events from\n    // auralizer -> signalMapper -> library\n    // TODO: Queue up signals that failed to play due to undownloaded assets\n    // instead of dropping them. This wait timer is a hack\n    setTimeout(() => auralizer.start(), 1000)\n\n    setupUI()\n  })\n})\n\nfunction setupUI () {\n  const muteButton = document.getElementById('mute-button')\n  const unmuteButton = document.getElementById('unmute-button')\n  \n  muteButton.addEventListener('click', () => {\n    muteButton.style.display = 'none'\n    unmuteButton.style.display = 'inherit'\n    audioCtx.masterVolume.gain.value = 0\n  })\n\n  unmuteButton.addEventListener('click', () => {\n    muteButton.style.display = 'inherit'\n    unmuteButton.style.display = 'none'\n    audioCtx.masterVolume.gain.value = 1\n  })\n\n  document.addEventListener('play-sound', e => {\n    if (e.detail.type === SignalType.STATE) {\n      document.body.style.backgroundPositionX = (e.detail.intensity * 100) + '%'\n    }\n  })\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import EventSound from './event-sound'\nimport HeartbeatSound from './heartbeat-sound'\nimport StateSound from './state-sound'\nimport Utils from './utils'\nimport LibraryParser from './library-parser'\n\nexport default class AudioLibrary {\n  constructor (indexUrls, options = {}) {\n    this.indexUrls = indexUrls\n    this.options = options\n    this.coupledSounds = []\n    this.eventSounds = []\n    this.heartbeatSounds = []\n    this.stateSounds = []\n  }\n\n  load (audioCtx) {\n    return Promise.all(\n      this.indexUrls.map(url => Utils.request(url)\n        .then(data => this.parseIndexFile(audioCtx, data, url)))\n    ).then(() => {\n      console.log(\n        `Loaded ${this.coupledSounds.length} coupled sounds, ` +\n        `${this.eventSounds.length} event sounds, ` +\n        `${this.heartbeatSounds.length} heartbeat sounds, ` +\n        `and ${this.stateSounds.length} state sounds`)\n    })\n  }\n\n  parseIndexFile (audioCtx, data, url) {\n    const baseUrl = url.replace(/__INDEX__$/, '')\n\n    data = data.replace(/<!--[\\s\\S]*-->/g, '') // Strip comments\n    const parsed = LibraryParser.parse(data)\n\n    parsed.forEach(dataEntry => {\n      const libraryEntry = {}\n      dataEntry.content.forEach(property => libraryEntry[property.name] = property.content)\n      libraryEntry.baseUrl = baseUrl\n      if (this.options.fileExtension) libraryEntry.fileExtension = this.options.fileExtension\n\n      switch (dataEntry.name) {\n        case 'couple':\n          // TODO: Create a new CoupleSound but push it into this.eventSounds\n          break\n        case 'event':\n          this.eventSounds.push(new EventSound(audioCtx, libraryEntry))\n          break\n        case 'heartbeat':\n          this.heartbeatSounds.push(new HeartbeatSound(audioCtx, libraryEntry))\n          break\n        case 'state':\n          this.stateSounds.push(new StateSound(audioCtx, libraryEntry))\n          break\n        default:\n          console.warn('Unhandled __INDEX__ entry type ' + dataEntry.name)\n          break\n      }\n    })\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/audio-library.js\n **/","import AudioResource from './audio-resource'\nimport ISound from './isound'\nimport MersenneTwister from './mersenne-twister'\nimport Utils from './utils'\n\nexport default class EventSound extends ISound {\n  constructor (audioCtx, libraryEntry) {\n    super(audioCtx, libraryEntry)\n\n    const count = Math.max(1, parseInt(libraryEntry.segments, 10) || 0)\n    const ext = libraryEntry.fileExtension || ''\n\n    this.name = libraryEntry.name\n    this.segments = Array.apply(null, Array(count)).map((_, i) => {\n      // {baseUrl}{name}.{nn}{fileExtension}\n      const url = `${libraryEntry.baseUrl}${this.name}.${Utils.zeroPad(i + 1, 2)}${ext}`\n      return new AudioResource(audioCtx, url)\n    })\n  }\n\n  load () {\n    this.segments.forEach(segment => segment.load())\n  }\n\n  play (intensity = 0.5, hash = 0) {\n    console.log(`[EventSound] ${this.name} gain=${intensity} hash=${hash}`)\n\n    // Convert hash into a position in our unit cube world\n    const prng = new MersenneTwister(hash)\n    const origin = { x: prng.random() - 0.5, y: 0, z: prng.random() - 0.5 }\n\n    // Find all of the segments to play\n    const segments = this.playableSegments()\n    if (!segments.length) return console.warn(`Did not play EventSound ${this.name}, no loaded segments`)\n\n    EventSound.playOneShot(this.audioCtx, segments, intensity, origin)\n  }\n\n  playableSegments () {\n    return this.segments.filter(s => s.audio)\n  }\n\n  static playOneShot (audioCtx, segments, gain, origin) {\n    const spatialNode = audioCtx.createPanner()\n    spatialNode.refDistance = 0.001\n    spatialNode.maxDistance = 1\n    spatialNode.rolloffFactor = 0.01\n    spatialNode.coneInnerAngle = 360\n    spatialNode.setOrientation(0 - origin.x, 0 - origin.y, 0 - origin.z)\n    spatialNode.setPosition(origin.x, origin.y, origin.z)\n\n    const gainNode = audioCtx.createGain()\n    gainNode.gain.value = gain\n\n    spatialNode.connect(gainNode)\n    gainNode.connect(audioCtx.masterVolume)\n\n    let time = audioCtx.currentTime\n    segments.forEach(segment => {\n      const source = audioCtx.createBufferSource()\n      source.buffer = segment.audio\n\n      source.connect(spatialNode)\n      source.start(time)\n\n      time += segment.audio.duration\n      source.stop(time)\n    })\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/event-sound.js\n **/","import Utils from './utils'\n\nexport default class AudioResource {\n  constructor (audioCtx, url) {\n    this.audioCtx = audioCtx\n    this.url = url\n    this.loading = false\n    this.audio = null\n  }\n\n  load () {\n    if (this.loading || this.audio) return\n    this.loading = true\n\n    return Utils.request(this.url, 'arraybuffer')\n    .then(buffer => AudioResource.bufferToAudio(this.audioCtx, buffer, this.url))\n    .then(audioBuffer => {\n      this.loading = false\n      this.audio = audioBuffer\n      console.log(`Loaded ${this.audio.duration.toFixed(2)} second clip from ${this.url}`)\n      return this.audio\n    })\n  }\n\n  static bufferToAudio (audioCtx, buffer, url) {\n    let raw = true\n    switch (Utils.fileExtension(url)) {\n      case '.flac':\n      case '.m4a':\n      case '.mp3':\n      case '.mp4':\n      case '.oga':\n      case '.ogg':\n      case '.wav':\n        raw = false\n        break\n    }\n\n    if (raw) {\n      const pcm16 = new Int16Array(buffer)\n      const pcmFloat = new Float32Array(pcm16.length)\n      pcmFloat.set(pcm16)\n      pcmFloat.forEach((x, i) => pcmFloat[i] = x / 0x7fff)\n\n      const audio = audioCtx.createBuffer(1, pcmFloat.length, 44100)\n      audio.copyToChannel(pcmFloat, 0)\n      return Promise.resolve(audio)\n    } else {\n      return audioCtx.decodeAudioData(buffer)\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/audio-resource.js\n **/","import MersenneTwister from './mersenne-twister'\n\nexport default class Utils {\n  static fileExtension (path) {\n    const match = path.match(/\\.[^.]+$/)\n    return match ? match[0] : undefined\n  }\n\n  static randomInt(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min\n  }\n\n  static request (url, responseType) {\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest()\n      xhr.open('GET', url)\n      xhr.responseType = responseType || 'text'\n\n      xhr.onload = function () {\n        if (this.status >= 200 && this.status < 300) {\n          resolve(xhr.response)\n        } else {\n          reject({ status: this.status, statusText: xhr.statusText })\n        }\n      }\n      xhr.onerror = function () {\n        reject({ status: this.status, statusText: xhr.statusText })\n      }\n\n      xhr.send()\n    })\n  }\n\n  static shuffled (array) {\n    array = array.slice(0)\n    let j, x, i\n    for (i = array.length; i; i--) {\n        j = Math.floor(Utils.prng.random() * i)\n        x = array[i - 1]\n        array[i - 1] = array[j]\n        array[j] = x\n    }\n    return array\n  }\n\n  static zeroPad(str, len) {\n    str = '' + str\n    while (str.length < len) str = '0' + str\n    return str\n  }\n}\n\n// Shared pseudo-random number generator\nUtils.prng = new MersenneTwister()\n\n// Equal power crossfade curves\nUtils.FADE_IN = new Float32Array(4096).map((_, i) => Math.cos((1 - i / 4096) * 0.5 * Math.PI))\nUtils.FADE_OUT = new Float32Array(4096).map((_, i) => Math.cos((i / 4096) * 0.5 * Math.PI))\n\n////////////////////////////////////////////////////////////////////////////////\n// Polyfills\n////////////////////////////////////////////////////////////////////////////////\n\nObject.values = Object.values || function values (obj) {\n  const vals = []\n  for (let key in obj) {\n    vals.push(obj[key])\n  }\n  return vals\n}\n\nif (typeof window.CustomEvent !== 'function') {\n  function CustomEvent (event, params) {\n    params = params || { bubbles: false, cancelable: false, detail: undefined }\n    var evt = document.createEvent('CustomEvent')\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail)\n    return evt\n  }\n\n  CustomEvent.prototype = window.Event.prototype\n  window.CustomEvent = CustomEvent\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.js\n **/","/**\n * Copyright (C) 1997 - 2002, Makoto Matsumoto and Takuji Nishimura,\n * All rights reserved.\n *\n * Original JS port by Sean McCullough (banksean@gmail.com)\n * ES6 port by John Hurliman (jhurliman@jhurliman.org)\n */\n\nexport default class MersenneTwister {\n  constructor(seed) {\n    if (seed == undefined) seed = new Date().getTime()\n\n    // Period parameters\n    this.N = 624\n    this.M = 397\n    this.MATRIX_A = 0x9908b0df // constant vector a\n    this.UPPER_MASK = 0x80000000 // most significant w-r bits\n    this.LOWER_MASK = 0x7fffffff // least significant r bits\n\n    this.mt = new Array(this.N) // the array for the state vector\n    this.mti = this.N + 1 // mti==N+1 means mt[N] is not initialized\n\n    this.mt[0] = seed >>> 0\n    for (this.mti = 1; this.mti < this.N; this.mti++) {\n      let s = this.mt[this.mti - 1] ^ (this.mt[this.mti - 1] >>> 30)\n      this.mt[this.mti] = (((((s & 0xffff0000) >>> 16) * 1812433253) << 16) + (s & 0x0000ffff) * 1812433253) + this.mti\n      this.mt[this.mti] >>>= 0\n    }\n  }\n\n  randomInt() {\n    let y\n    let mag01 = new Array(0x0, this.MATRIX_A)\n\n    if (this.mti >= this.N) { // generate N words at one time\n      let kk\n\n      for (kk = 0; kk < this.N - this.M; kk++) {\n        y = (this.mt[kk] & this.UPPER_MASK) | (this.mt[kk + 1] & this.LOWER_MASK)\n        this.mt[kk] = this.mt[kk + this.M] ^ (y >>> 1) ^ mag01[y & 0x1]\n      }\n      for (; kk < this.N - 1; kk++) {\n        y = (this.mt[kk] & this.UPPER_MASK) | (this.mt[kk + 1] & this.LOWER_MASK)\n        this.mt[kk] = this.mt[kk + (this.M - this.N)] ^ (y >>> 1) ^ mag01[y & 0x1]\n      }\n\n      y = (this.mt[this.N - 1] & this.UPPER_MASK) | (this.mt[0] & this.LOWER_MASK)\n      this.mt[this.N - 1] = this.mt[this.M - 1] ^ (y >>> 1) ^ mag01[y & 0x1]\n      this.mti = 0\n    }\n\n    y = this.mt[this.mti++]\n\n    // Tempering\n    y ^= (y >>> 11)\n    y ^= (y << 7) & 0x9d2c5680\n    y ^= (y << 15) & 0xefc60000\n    y ^= (y >>> 18)\n\n    return y >>> 0\n  }\n\n  random() {\n    return this.randomInt() * (1.0 / 4294967296.0)\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/mersenne-twister.js\n **/","\nexport default class ISound {\n  constructor (audioCtx, libraryEntry) {\n    this.audioCtx = audioCtx\n    this.duration = Number((libraryEntry.length || '').split(' ').shift()) || undefined\n    this.description = libraryEntry.description\n    this.suggested = libraryEntry.suggested\n  }\n\n  load () { }\n  play (intensity = 0.5, hash = 0) { }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/isound.js\n **/","import ISound from './isound'\n\nexport default class HeartbeatSound extends ISound {\n  constructor (audioCtx, libraryEntry) {\n    super(audioCtx, libraryEntry)\n  }\n\n  load () {\n\n  }\n\n  play (intensity = 0.5, hash = 0) {\n\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/heartbeat-sound.js\n **/","import AudioResource from './audio-resource'\nimport ISound from './isound'\nimport Utils from './utils'\n\nexport default class StateSound extends ISound {\n  constructor (audioCtx, libraryEntry) {\n    super(audioCtx, libraryEntry)\n\n    const count = Math.max(1, parseInt(libraryEntry.segments, 10) || 0)\n    const ext = libraryEntry.fileExtension || ''\n\n    // Create a shared gain node for this StateSound so we can adjust intensity\n    // without touching fade-in / fade-out curves\n    this.stateGain = audioCtx.createGain()\n    this.stateGain.connect(audioCtx.masterVolume)\n\n    this.name = libraryEntry.name\n    this.segments = Array.apply(null, Array(count)).map((_, i) => {\n      // {baseUrl}{name}.{nn}{fileExtension}\n      const url = `${libraryEntry.baseUrl}${this.name}.${Utils.zeroPad(i + 1, 2)}${ext}`\n\n      const segment = new AudioResource(audioCtx, url)\n      segment.index = i\n      return segment\n    })\n    this.sources = []\n    this.timer = null\n  }\n\n  load () {\n    this.segments.forEach(segment => segment.load())\n  }\n\n  play (intensity = 0.5, hash = 0) {\n    console.log(`[StateSound] ${this.name} gain=${intensity} hash=${hash}`)\n    this.doPlay(intensity, hash)\n  }\n\n  doPlay (intensity, hash) {\n    // Remove already played segments\n    const curTime = this.audioCtx.currentTime\n    while (this.sources.length && this.sources[0].endTime <= curTime)\n      this.sources.shift()\n\n    // Cancel and remove upcoming scheduled segments\n    this.sources.slice(1).forEach(source => source.stop(0))\n    this.sources = this.sources.slice(0, 1)\n\n    let curSource = this.sources[0]\n    if (!curSource) {\n      // No currently playing segment, find the next available\n      const curSegment = this.nextSegment()\n      if (!curSegment) return console.warn(`Did not play StateSound ${this.name}, no loaded segments`)\n\n      curSource = this.playWithCrossfade(curSegment, 0, intensity)\n      this.sources.push(curSource)\n    } else if (this.stateGain.gain.value !== intensity) {\n      // Change the volume of the current playing segment\n      const sharedGain = this.stateGain.gain\n      sharedGain.cancelScheduledValues(curTime)\n      sharedGain.setValueAtTime(sharedGain.value, curTime)\n      sharedGain.linearRampToValueAtTime(intensity, curTime + StateSound.VOLUME_CHANGE_TIME)\n    }\n\n    // Schedule the next segment for playback\n    const nextSegment = this.nextSegment()\n    const offset = Math.max(0.1, curSource.endTime - curTime - StateSound.FADE_TIME)\n    const nextSource = this.playWithCrossfade(nextSegment, offset, intensity)\n    this.sources.push(nextSource)\n\n    // Run this method again right after the current segment finishes to\n    // schedule another segment\n    clearTimeout(this.timer)\n    this.timer = setTimeout(() => { this.doPlay(intensity, hash) },\n      (curSource.endTime - curTime + 0.1) * 1000)\n  }\n\n  nextSegment () {\n    const curSegment = this.sources.length ? this.sources[0].segment : undefined\n    const segments = Utils.shuffled(this.segments)\n\n    // Prefer a segment that is not the current playing segment\n    for (let segment of segments) {\n      if (segment !== curSegment && segment.audio) return segment\n    }\n\n    // Fall back to using the current segment, or undefined if there is none\n    return curSegment\n  }\n\n  playWithCrossfade (segment, offset, gain) {\n    const curTime = this.audioCtx.currentTime\n    const duration = segment.audio.duration\n\n    const source = this.audioCtx.createBufferSource()\n    source.buffer = segment.audio\n\n    // Create a gain node with fade-in / fade-out curves\n    const fadeInTime = curTime + offset\n    const fadeOutTime = curTime + offset + duration - StateSound.FADE_TIME\n    const gainNode = this.audioCtx.createGain()\n    gainNode.gain.setValueCurveAtTime(Utils.FADE_IN, fadeInTime, StateSound.FADE_TIME)\n    gainNode.gain.setValueCurveAtTime(Utils.FADE_OUT, fadeOutTime, StateSound.FADE_TIME)\n\n    source.connect(gainNode)\n    gainNode.connect(this.stateGain)\n\n    source.start(curTime + offset)\n    source.stop(curTime + offset + duration)\n\n    source.segment = segment\n    source.endTime = curTime + offset + duration\n    return source\n  }\n}\n\nStateSound.FADE_TIME = 1.0\nStateSound.VOLUME_CHANGE_TIME = 3.0\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/state-sound.js\n **/","/**\n * PEG.js grammar:\n\nElements =\n  elements:(Comment / Element / Text)* { return elements.filter(x => x); }\n\nElement =\n  startTag:StartTag content:SubContent endTag:EndTag {\n    return {\n      name: startTag,\n      content: content.filter(x => x)\n    };\n  }\n\nSubContent =\n  (SubElement / Text)*\n\nSubElement =\n  startTag:StartTag content:SubContent endTag:EndTag {\n    return {\n      name: startTag,\n      content: content[0]\n    };\n  }\n\nComment =\n  \"<!--\" Text \"-->\"\n\nStartTag =\n  \"<\" name:TagName \">\" { return name; }\n\nEndTag =\n  \"</\" name:TagName \">\" { return name; }\n\nTagName = chars:[a-z]+ { return chars.join(\"\"); }\nText    = chars:[^<]+  { return chars.join(\"\").trim(); }\n\n */\n\nconst LibraryParser = /*\n * Generated by PEG.js 0.10.0.\n *\n * http://pegjs.org/\n */\n(function() {\n  \"use strict\";\n\n  function peg$subclass(child, parent) {\n    function ctor() { this.constructor = child; }\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n  }\n\n  function peg$SyntaxError(message, expected, found, location) {\n    this.message  = message;\n    this.expected = expected;\n    this.found    = found;\n    this.location = location;\n    this.name     = \"SyntaxError\";\n\n    if (typeof Error.captureStackTrace === \"function\") {\n      Error.captureStackTrace(this, peg$SyntaxError);\n    }\n  }\n\n  peg$subclass(peg$SyntaxError, Error);\n\n  peg$SyntaxError.buildMessage = function(expected, found) {\n    var DESCRIBE_EXPECTATION_FNS = {\n          literal: function(expectation) {\n            return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n          },\n\n          \"class\": function(expectation) {\n            var escapedParts = \"\",\n                i;\n\n            for (i = 0; i < expectation.parts.length; i++) {\n              escapedParts += expectation.parts[i] instanceof Array\n                ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\n                : classEscape(expectation.parts[i]);\n            }\n\n            return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n          },\n\n          any: function(expectation) {\n            return \"any character\";\n          },\n\n          end: function(expectation) {\n            return \"end of input\";\n          },\n\n          other: function(expectation) {\n            return expectation.description;\n          }\n        };\n\n    function hex(ch) {\n      return ch.charCodeAt(0).toString(16).toUpperCase();\n    }\n\n    function literalEscape(s) {\n      return s\n        .replace(/\\\\/g, '\\\\\\\\')\n        .replace(/\"/g,  '\\\\\"')\n        .replace(/\\0/g, '\\\\0')\n        .replace(/\\t/g, '\\\\t')\n        .replace(/\\n/g, '\\\\n')\n        .replace(/\\r/g, '\\\\r')\n        .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n    }\n\n    function classEscape(s) {\n      return s\n        .replace(/\\\\/g, '\\\\\\\\')\n        .replace(/\\]/g, '\\\\]')\n        .replace(/\\^/g, '\\\\^')\n        .replace(/-/g,  '\\\\-')\n        .replace(/\\0/g, '\\\\0')\n        .replace(/\\t/g, '\\\\t')\n        .replace(/\\n/g, '\\\\n')\n        .replace(/\\r/g, '\\\\r')\n        .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n    }\n\n    function describeExpectation(expectation) {\n      return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n    }\n\n    function describeExpected(expected) {\n      var descriptions = new Array(expected.length),\n          i, j;\n\n      for (i = 0; i < expected.length; i++) {\n        descriptions[i] = describeExpectation(expected[i]);\n      }\n\n      descriptions.sort();\n\n      if (descriptions.length > 0) {\n        for (i = 1, j = 1; i < descriptions.length; i++) {\n          if (descriptions[i - 1] !== descriptions[i]) {\n            descriptions[j] = descriptions[i];\n            j++;\n          }\n        }\n        descriptions.length = j;\n      }\n\n      switch (descriptions.length) {\n        case 1:\n          return descriptions[0];\n\n        case 2:\n          return descriptions[0] + \" or \" + descriptions[1];\n\n        default:\n          return descriptions.slice(0, -1).join(\", \")\n            + \", or \"\n            + descriptions[descriptions.length - 1];\n      }\n    }\n\n    function describeFound(found) {\n      return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n    }\n\n    return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n  };\n\n  function peg$parse(input, options) {\n    options = options !== void 0 ? options : {};\n\n    var peg$FAILED = {},\n\n        peg$startRuleFunctions = { Elements: peg$parseElements },\n        peg$startRuleFunction  = peg$parseElements,\n\n        peg$c0 = function(elements) { return elements.filter(x => x); },\n        peg$c1 = function(startTag, content, endTag) {\n            return {\n              name: startTag,\n              content: content.filter(x => x)\n            };\n          },\n        peg$c2 = function(startTag, content, endTag) {\n            return {\n              name: startTag,\n              content: content[0]\n            };\n          },\n        peg$c3 = \"<!--\",\n        peg$c4 = peg$literalExpectation(\"<!--\", false),\n        peg$c5 = \"-->\",\n        peg$c6 = peg$literalExpectation(\"-->\", false),\n        peg$c7 = \"<\",\n        peg$c8 = peg$literalExpectation(\"<\", false),\n        peg$c9 = \">\",\n        peg$c10 = peg$literalExpectation(\">\", false),\n        peg$c11 = function(name) { return name; },\n        peg$c12 = \"</\",\n        peg$c13 = peg$literalExpectation(\"</\", false),\n        peg$c14 = /^[a-z]/,\n        peg$c15 = peg$classExpectation([[\"a\", \"z\"]], false, false),\n        peg$c16 = function(chars) { return chars.join(\"\"); },\n        peg$c17 = /^[^<]/,\n        peg$c18 = peg$classExpectation([\"<\"], true, false),\n        peg$c19 = function(chars) { return chars.join(\"\").trim(); },\n\n        peg$currPos          = 0,\n        peg$savedPos         = 0,\n        peg$posDetailsCache  = [{ line: 1, column: 1 }],\n        peg$maxFailPos       = 0,\n        peg$maxFailExpected  = [],\n        peg$silentFails      = 0,\n\n        peg$result;\n\n    if (\"startRule\" in options) {\n      if (!(options.startRule in peg$startRuleFunctions)) {\n        throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n      }\n\n      peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n    }\n\n    function text() {\n      return input.substring(peg$savedPos, peg$currPos);\n    }\n\n    function location() {\n      return peg$computeLocation(peg$savedPos, peg$currPos);\n    }\n\n    function expected(description, location) {\n      location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n      throw peg$buildStructuredError(\n        [peg$otherExpectation(description)],\n        input.substring(peg$savedPos, peg$currPos),\n        location\n      );\n    }\n\n    function error(message, location) {\n      location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n      throw peg$buildSimpleError(message, location);\n    }\n\n    function peg$literalExpectation(text, ignoreCase) {\n      return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n    }\n\n    function peg$classExpectation(parts, inverted, ignoreCase) {\n      return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n    }\n\n    function peg$anyExpectation() {\n      return { type: \"any\" };\n    }\n\n    function peg$endExpectation() {\n      return { type: \"end\" };\n    }\n\n    function peg$otherExpectation(description) {\n      return { type: \"other\", description: description };\n    }\n\n    function peg$computePosDetails(pos) {\n      var details = peg$posDetailsCache[pos], p;\n\n      if (details) {\n        return details;\n      } else {\n        p = pos - 1;\n        while (!peg$posDetailsCache[p]) {\n          p--;\n        }\n\n        details = peg$posDetailsCache[p];\n        details = {\n          line:   details.line,\n          column: details.column\n        };\n\n        while (p < pos) {\n          if (input.charCodeAt(p) === 10) {\n            details.line++;\n            details.column = 1;\n          } else {\n            details.column++;\n          }\n\n          p++;\n        }\n\n        peg$posDetailsCache[pos] = details;\n        return details;\n      }\n    }\n\n    function peg$computeLocation(startPos, endPos) {\n      var startPosDetails = peg$computePosDetails(startPos),\n          endPosDetails   = peg$computePosDetails(endPos);\n\n      return {\n        start: {\n          offset: startPos,\n          line:   startPosDetails.line,\n          column: startPosDetails.column\n        },\n        end: {\n          offset: endPos,\n          line:   endPosDetails.line,\n          column: endPosDetails.column\n        }\n      };\n    }\n\n    function peg$fail(expected) {\n      if (peg$currPos < peg$maxFailPos) { return; }\n\n      if (peg$currPos > peg$maxFailPos) {\n        peg$maxFailPos = peg$currPos;\n        peg$maxFailExpected = [];\n      }\n\n      peg$maxFailExpected.push(expected);\n    }\n\n    function peg$buildSimpleError(message, location) {\n      return new peg$SyntaxError(message, null, null, location);\n    }\n\n    function peg$buildStructuredError(expected, found, location) {\n      return new peg$SyntaxError(\n        peg$SyntaxError.buildMessage(expected, found),\n        expected,\n        found,\n        location\n      );\n    }\n\n    function peg$parseElements() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseComment();\n      if (s2 === peg$FAILED) {\n        s2 = peg$parseElement();\n        if (s2 === peg$FAILED) {\n          s2 = peg$parseText();\n        }\n      }\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseComment();\n        if (s2 === peg$FAILED) {\n          s2 = peg$parseElement();\n          if (s2 === peg$FAILED) {\n            s2 = peg$parseText();\n          }\n        }\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c0(s1);\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parseElement() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parseStartTag();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseSubContent();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parseEndTag();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c1(s1, s2, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseSubContent() {\n      var s0, s1;\n\n      s0 = [];\n      s1 = peg$parseSubElement();\n      if (s1 === peg$FAILED) {\n        s1 = peg$parseText();\n      }\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        s1 = peg$parseSubElement();\n        if (s1 === peg$FAILED) {\n          s1 = peg$parseText();\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseSubElement() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parseStartTag();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseSubContent();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parseEndTag();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c2(s1, s2, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseComment() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 4) === peg$c3) {\n        s1 = peg$c3;\n        peg$currPos += 4;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c4); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseText();\n        if (s2 !== peg$FAILED) {\n          if (input.substr(peg$currPos, 3) === peg$c5) {\n            s3 = peg$c5;\n            peg$currPos += 3;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c6); }\n          }\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseStartTag() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 60) {\n        s1 = peg$c7;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c8); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseTagName();\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 62) {\n            s3 = peg$c9;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c10); }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c11(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseEndTag() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 2) === peg$c12) {\n        s1 = peg$c12;\n        peg$currPos += 2;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c13); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseTagName();\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 62) {\n            s3 = peg$c9;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c10); }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c11(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseTagName() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = [];\n      if (peg$c14.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c15); }\n      }\n      if (s2 !== peg$FAILED) {\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          if (peg$c14.test(input.charAt(peg$currPos))) {\n            s2 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c15); }\n          }\n        }\n      } else {\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c16(s1);\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parseText() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = [];\n      if (peg$c17.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c18); }\n      }\n      if (s2 !== peg$FAILED) {\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          if (peg$c17.test(input.charAt(peg$currPos))) {\n            s2 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c18); }\n          }\n        }\n      } else {\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c19(s1);\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    peg$result = peg$startRuleFunction();\n\n    if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n      return peg$result;\n    } else {\n      if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n        peg$fail(peg$endExpectation());\n      }\n\n      throw peg$buildStructuredError(\n        peg$maxFailExpected,\n        peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n        peg$maxFailPos < input.length\n          ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n          : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n      );\n    }\n  }\n\n  return {\n    SyntaxError: peg$SyntaxError,\n    parse:       peg$parse\n  };\n})();\n\nexport default LibraryParser\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/library-parser.js\n **/","import IAuralizer from './iauralizer'\nimport LRUCache from './lru-cache'\nimport SignalType from './signal-type'\nimport Utils from './utils'\n\nexport default class HackerNewsAuralizer extends IAuralizer {\n  get eventSignals () { return HackerNewsAuralizer.EVENTS }\n  get heartbeatSignals () { return HackerNewsAuralizer.HEARTBEATS }\n  get stateSignals () { return HackerNewsAuralizer.STATES }\n\n  start () {\n    const config = { databaseURL: 'https://hacker-news.firebaseio.com' }\n    this.hn = firebase.initializeApp(config, 'hackernews').database().ref('v0')\n    this.itemCache = new LRUCache({ capacity: 1000 })\n    this.topStories = null\n    this.bestStories = null\n\n    const HOUR_MS = 1000 * 60 * 60\n\n    this.hn.child('newstories').on('value', snapshot => {\n      const now = Date.now()\n\n      const itemIDs = snapshot.val()\n      if (!itemIDs || !itemIDs.length) return\n\n      this.signal(SignalType.EVENT, 'newstories', 0.5, itemIDs[0])\n\n      this.getItems(itemIDs.slice(0, 90)).then(items => {\n        const baseVal = HackerNewsAuralizer.storiesPerHour(items, 90, now)\n        const curVal = HackerNewsAuralizer.storiesPerHour(items, 30, now)\n\n        console.log(`[HN] ${curVal.toFixed(2)}/${baseVal.toFixed(2)} stories per hour`)\n        this.signal(SignalType.STATE, 'story-frequency', curVal / (baseVal * 2), items[0].time)\n      })\n    })\n\n    this.hn.child('topstories').on('value', snapshot => {\n      const itemIDs = snapshot.val()\n      if (!itemIDs || !itemIDs.length) return\n\n      this.signal(SignalType.EVENT, 'topstories', 0.5, itemIDs[0])\n\n      this.getItems(itemIDs.slice(0, 30)).then(items => {\n        this.topStories = items\n        this.updateTrend()\n      })\n    })\n\n    this.hn.child('beststories').on('value', snapshot => {\n      const itemIDs = snapshot.val()\n      if (!itemIDs || !itemIDs.length) return\n\n      this.signal(SignalType.EVENT, 'beststories', 0.5, itemIDs[0])\n\n      this.getItems(itemIDs.slice(0, 90)).then(items => {\n        this.bestStories = items\n        this.updateTrend()\n      })\n    })\n\n    let lastUpdate = Date.now()\n    this.hn.child('updates').on('value', snapshot => {\n      // Track how much time passed between updates\n      const now = Date.now()\n      const deltaMS = now - lastUpdate\n      lastUpdate = now\n\n      const itemIDs = snapshot.val().items\n      if (!itemIDs || !itemIDs.length) return\n\n      this.signal(SignalType.EVENT, 'updates', 0.5, itemIDs[0])\n\n      this.getItems(itemIDs).then(items => {\n        const sorted = {\n          jobs: [],\n          stories: [],\n          comments: [],\n          polls: [],\n        }\n\n        items.forEach(item => {\n          switch (item.type) {\n            case 'job': sorted.jobs.push(item); break\n            case 'story': sorted.stories.push(item); break\n            case 'comment': sorted.comments.push(item); break\n            case 'poll': sorted.polls.push(item); break\n            default: break\n          }\n        })\n\n        const signals = []\n        for (let signal in sorted) {\n          const array = sorted[signal]\n          if (!array.length) continue\n          const denominator = (signal === 'job' || signal === 'poll') ? 2 : items.length\n\n          signals.push({\n            type: SignalType.EVENT,\n            signal: signal,\n            intensity: array.length / denominator,\n            hash: array.length\n          })\n        }\n\n        console.log(\n          `[HN] ${sorted.jobs.length} jobs, ${sorted.stories.length} stories, ` +\n          `${sorted.comments.length} comments, ${sorted.polls.length} polls`)\n        if (signals.length)\n          this.signalOverTime(signals, deltaMS)\n      })\n    })\n  }\n\n  updateTrend () {\n    if (!this.topStories || !this.bestStories) return\n\n    // Count the number of top stories that appear in the best stories list\n    const bestSet = new Set(this.bestStories.map(item => item.id))\n    const count = this.topStories.filter(item => bestSet.has(item.id)).length\n    console.log(`[HN] ${count}/${this.topStories.length} front page stories appear in recent best`)\n\n    // Full intensity if 1/3 or more of /topstories have made it to the last\n    // few pages of /beststories\n    const intensity = count / (this.topStories.length / 3)\n    this.signal(SignalType.STATE, 'popular-stories', intensity, count)\n  }\n\n  getItems (itemIDs) {\n    return Promise\n    .all(itemIDs.map(id => this.getItem(id)))  // Retrieve all items in parallel\n    .then(items => items.filter(item => item)) // Remove missing entries\n  }\n\n  getItem (itemID) {\n    return new Promise((resolve, reject) => {\n      // Cache check\n      const cached = this.itemCache.fetch(itemID)\n      if (cached) return resolve(cached)\n\n      // Fetch from Firebase\n      this.hn.child('item/' + itemID).once('value', snapshot => {\n        const item = snapshot.val()\n        this.itemCache.store(itemID, item)\n        resolve(item)\n      }, err => {\n        reject(err)\n      })\n    })\n  }\n\n  signal (type, signal, intensity, hash = 0) {\n    if (this.callback) this.callback(type, signal, intensity, hash)\n  }\n\n  signalOverTime (signals, deltaMS) {\n    signals = Utils.shuffled(signals)\n    const spacing = deltaMS / signals.length\n\n    signals.forEach((s, i) => {\n      const randMS = Math.max(0, spacing * i + Utils.prng.random() * deltaMS - spacing * 0.5)\n      setTimeout(() => this.signal(s.type, s.signal, s.intensity, s.hash), randMS)\n    })\n  }\n\n  static storiesPerHour (items, windowSize, now) {\n    if (!items.length) return 0\n\n    const count = Math.min(windowSize, items.length)\n    const oldest = items[count - 1].time * 1000\n    const hours = (now - oldest) / (1000 * 60 * 60)\n\n    return count / hours\n  }\n}\n\nHackerNewsAuralizer.EVENTS = [ 'jobs', 'stories', 'comments', 'polls',\n  'topstories', 'beststories', 'newstories', 'updates' ]\nHackerNewsAuralizer.HEARTBEATS = [] // TODO: updates should be a heartbeat\nHackerNewsAuralizer.STATES = [ 'story-frequency', 'popular-stories' ]\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/hacker-news-auralizer.js\n **/","\n/**\n * IAuralizer is a base class for auralizers which connect to external data\n * sources and emit signals that can be interpreted by the rest of the\n * application.\n */\nexport default class IAuralizer {\n  get eventSignals () { return [] }\n  get heartbeatSignals () { return [] }\n  get stateSignals () { return [] }\n\n  /**\n   * @callback IAuralizer~signalHandler\n   * @param {SignalType} type - The type of signal. event, heartbeat, state.\n   * @param {string} signal - The identifier for this signal.\n   * @param {number} intensity - Normalized signal intensity, [0-1].\n   * @param {number} hash - An optional integer value tied to this unique event,\n   *   used for spatialization.\n   */\n\n  /** @type {IAuralizer~signalHandler} */\n  set signalHandler (value) { this.callback = value }\n\n  start () {}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/iauralizer.js\n **/","\nexport default class LRUCache {\n  constructor (options = {}) {\n    this._map = {}\n    this._queue = {}\n    this._capacity = options.capacity || 10\n    this._size = 0\n  }\n\n  store (key, value) {\n    const replaced = this.delete(key)\n    const queue = this._queue\n    const node = { value: value, key: key }\n    LRUCache.moveToLast(node, queue)\n    this._map[key] = node\n    this._size += 1\n    if (this._size > this._capacity)\n      this.delete(this._queue.first.key)\n    return replaced\n  }\n\n  fetch (key) {\n    const node = this._map[key]\n    if (node === undefined) return undefined\n    LRUCache.detachFromQueue(node, this._queue)\n    LRUCache.moveToLast(node, this._queue)\n    return node.value\n  }\n\n  delete (key) {\n    const node = this._map[key]\n    if (node === undefined) return false\n\n    LRUCache.detachFromQueue(node, this._queue)\n    delete this._map[key]\n    this._size -= 1\n    return true\n  }\n\n  static detachFromQueue (node, queue) {\n    if (node === queue.first)\n      queue.first = node.next\n    if (node === queue.last)\n      queue.last = node.prev\n    if (node.prev)\n      node.prev.next = node.next\n    if (node.next)\n      node.next.prev = node.prev\n  }\n\n  static moveToLast (node, queue) {\n    node.prev = queue.last\n    node.next = null\n    if (queue.last)\n      queue.last.next = node\n    queue.last = node\n    if (!queue.first)\n      queue.first = node\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lru-cache.js\n **/","\n/**\n * Enum for signal types an auralizer can emit.\n * @readonly\n * @enum {string}\n */\nconst SignalType = {\n  EVENT: 'event',\n  HEARTBEAT: 'heartbeat',\n  STATE: 'state',\n}\n\nexport default SignalType\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/signal-type.js\n **/","import ISignalMapper from './isignal-mapper'\nimport Utils from './utils'\n\nexport default class RandomSignalMapper extends ISignalMapper {\n  constructor (auralizer, library) {\n    super (auralizer, library)\n\n    const rand1 = Utils.prng.randomInt()\n    const rand2 = Utils.prng.randomInt()\n    const rand3 = Utils.prng.randomInt()\n\n    auralizer.eventSignals.forEach((signal, i, signals) => {\n      this.maps.event[signal] = [ library.eventSounds[(rand1 + i) % library.eventSounds.length] ]\n    })\n    auralizer.heartbeatSignals.forEach((signal, i, signals) => {\n      this.maps.heartbeat[signal] = [ library.heartbeatSounds[(rand2 + i) % library.heartbeatSounds.length] ]\n    })\n    auralizer.stateSignals.forEach((signal, i, signals) => {\n      this.maps.state[signal] = [ library.stateSounds[(rand3 + i) % library.stateSounds.length] ]\n    })\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/random-signal-mapper.js\n **/","\nexport default class ISignalMapper {\n  constructor (auralizer, library) {\n    this.auralizer = auralizer\n    this.library = library\n\n    this.maps = {\n      event: {},\n      heartbeat: {},\n      state: {},\n    }\n\n    auralizer.signalHandler = this.signalHandler.bind(this)\n  }\n\n  startLoadAudio () {\n    Object.values(this.maps).forEach(map => {\n      Object.values(map).forEach(sounds => {\n        sounds.forEach(sound => sound.load())\n      })\n    })\n  }\n\n  signalHandler (type, signal, intensity, hash) {\n    const map = this.maps[type]\n    const sounds = map ? map[signal] : undefined\n    if (!sounds || !sounds.length) return console.warn(`Unmapped signal ${type}:${signal}`)\n\n    const sound = sounds[hash % sounds.length]\n\n    intensity = Math.max(0, Math.min(1, intensity)) || 0\n    hash = Number(hash) || 0\n\n    // Broadcast an event\n    const event = new CustomEvent('play-sound',\n      { detail: { type: type, signal: signal, intensity: intensity, hash: hash } })\n    document.dispatchEvent(event)\n\n    // Play the sound\n    sound.play(intensity, hash)\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/isignal-mapper.js\n **/"],"sourceRoot":""}